(function(a){"use strict";function b(b,c){let d=b[0].querySelector(".tp-rental-overlay"),e=b[0].querySelector(".tp-input-field");a(".tp-search-input",b).on({focus:function(){d.style.cssText="visibility:visible;opacity:1;",e.style.cssText="z-index:1000;"},focusout:function(){d.style.cssText="visibility:hidden;opacity:0;",e.style.cssText="z-index:0;"}}),a(".tp-select",b).on("click",function(){d.style.cssText="visibility:visible;opacity:1;"}),a(".tp-rental-overlay",b).on("click",function(){d.style.cssText="visibility:hidden;opacity:0;",c.slideUp()}),b.keyup(function(a){"Escape"===a.key&&(d.style.cssText="visibility:hidden;opacity:0;")})}var c=new Map,d=function(a,d){function f(a){h[0].querySelector(".tp-close-btn").style.cssText="display:none",h[0].querySelector(".tp-ajx-loading").style.cssText="display:flex",g(a.target.value)}function g(){let b=d("input[name=s]",a).val(),e=d("input[name=taxonomy]",a).val(),f=d("input[name=post_type]",a).val();m.html(""),o.find(".tp-search-pagina",a).html("");let g={action:"tp_search_bar",searchData:d(".tp-search-form",a).serialize(),text:b,postper:j.post_page,GFilter:l,ACFilter:k,ResultData:q,DefaultData:r,nonce:j.nonce};jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:g,beforeSend:function(a){null!=c&&0!=c.size&&"undefined"!=c.size&&"undefined"!=typeof c.abort&&c.abort(),c=a,"pagination"==q.Pagestyle&&(h[0].querySelector(".tp-search-list-inner").style.cssText="transform: translateX(0px)")},success:function(a){let b=h[0].querySelectorAll(".tp-search-error"),c=h[0].querySelector(".tp-search-header"),d=h[0].querySelector(".tp-search-list");if(b[0].classList.remove("active"),a.data.error&&0<b.length)return b[0].innerHTML=a.data.message,c.style.cssText="display:none",d.style.cssText="display:none",void n.slideDown(100);c.style.cssText="display:flex",d.style.cssText="display:flex",b[0].innerHTML="";var e=a&&a.data?a.data:"";if(e&&0!==e.post_count){let a=e.posts,b=null,c="",d="<div class=\""+".tp-search-slider tp-row".replace(".","")+"\">%s</div>",f="";for(b in n.slideDown(100),a)f+=C(a[b]),(0==(parseInt(b)+1)%e.limit_query||parseInt(b)===a.length-1)&&(c+=d.replace("%s",f),f="");if(m.html(c),"no-animation"!=s&&K("flex"),p.TotalResult){let a=p.TotalResultTxt?p.TotalResultTxt:"";o.find(".tp-search-resultcount").html(e.post_count+" "+a)}if(e.pagination)h[0].querySelector(".tp-search-pagina").innerHTML=e.pagination,F(".tp-search-slider tp-row",m,e,g);else if(!e.loadmore)e.lazymore&&e.total_count>e.limit_query&&(h[0].querySelector(".ajax_lazy_load").innerHTML=e.lazymore,E(".tp-search-slider tp-row",m,e,g));else if(e.total_count>e.limit_query){let a=h[0].querySelectorAll(".ajax_load_more");0<a.length&&a[0].insertAdjacentHTML("afterbegin",e.loadmore),D(e,g)}else{let a=h[0].querySelectorAll(".tp-search-pagina");0<a.length&&(a[0].innerHTML=e.loadmore_page)}}else return b[0]&&(b[0].classList.add("active"),b[0].innerHTML=p.errormsg),c.style.cssText="display:none",d.style.cssText="display:none",void n.slideDown(400)},complete:function(){}}).then(function(){setTimeout(function(){h[0].querySelector(".tp-ajx-loading").style.cssText="display:none",h[0].querySelector(".tp-close-btn").style.cssText="display:flex"},500),I()})}var h=a[0].querySelectorAll(".tp-search-bar"),i=d(".tp-search-bar",a),j=i.data("ajax_search"),k=i.data("acfdata"),l=i.data("genericfilter"),m=i.find(".tp-search-list-inner"),n=i.find(".tp-search-area"),o=i.find(".tp-search-header"),p=h[0].dataset&&h[0].dataset.resultSetting?JSON.parse(h[0].dataset.resultSetting):[],q=h[0].dataset&&h[0].dataset.paginationData?JSON.parse(h[0].dataset.paginationData):[],r=h[0].dataset&&h[0].dataset.defaultData?JSON.parse(h[0].dataset.defaultData):[],s=p&&p.animation_effects?p.animation_effects:"no-animation";m.css("transform","translateX(0)");let t=h[0].querySelectorAll(".tp-rental-overlay");0<t.length&&b(a,n);let u=h[0].querySelectorAll(".tp-sbar-dropdown");0<u.length&&(d(".tp-sbar-dropdown",a).on("click",function(){d(this).attr("tabindex",1).focus(),d(this).toggleClass("active"),d(this).find(".tp-sbar-dropdown-menu").slideToggle(300)}),d(".tp-sbar-dropdown",a).focusout(function(){d(this).removeClass("active"),d(this).find(".tp-sbar-dropdown-menu").slideUp(300)}),d(".tp-sbar-dropdown .tp-sbar-dropdown-menu .tp-searchbar-li",a).on("click",function(){d(this).parents(".tp-sbar-dropdown").find("span").text(d(this).text()),d(this).parents(".tp-sbar-dropdown").find("input").attr("value",d(this).attr("id")).change()}));let v=h[0].querySelectorAll(".tp-rsearch-tagname");0<v.length&&v.forEach(function(a){a.addEventListener("click",function(a){a.preventDefault();let b=h[0].querySelectorAll(".tp-search-input");0<b.length&&(b[0].value=this.textContent,d(h[0]).change())})});var w=!1;if("yes"==j.ajax){var x=q.PNavigation?q.PNavigation:0,y=j&&j.post_page?+j.post_page:3,z=r&&r.SpecialCTP?r.SpecialCTP:0,A=r&&j.ajaxsearchCharLimit?+j.ajaxsearchCharLimit:0;var B="";d(h[0]).on("change keyup",function(b){let c=b.type,e=d("input[name=s]",a).val(),g=d("input[name=post_type]",a).val(),i=d("input[name=taxonomy]",a).val(),j=d("input[name=cat]",a).val(),k=h[0].querySelectorAll("input[name^=taxonomy_]");return!("change"==c&&w)&&("keyup"==c&&(B=c),"change"==c&&"keyup"==B?(B="",!1):void(0<k.length?k.forEach(function(a){"keyup"==c&&e.length>=A||"change"==c&&a&&0==z||a&&e.length>=A||""==a&&e.length>=A?f(b):h[0].querySelectorAll(".tp-close-btn")}):"keyup"==c&&e.length>=A||"change"==c&&(g&&0==z||g&&e.length>=A||""==g&&e.length>=A)?f(b):h[0].querySelectorAll(".tp-close-btn")))})}var C=function(a){let b="",c=a.title?a.title:"",d=a.content?a.content:"",e=p&&p.ResultlinkOn?p.ResultlinkOn:"",f=e&&p&&p.Resultlinktarget?`target="${p.Resultlinktarget}"`:"",g=e&&a&&a.link?`href="${a.link}"`:"";if(p.textlimit){if(p.TxtTitle){let a=p.textcount?p.textcount:100,b=p.textdots?p.textdots:"";"char"==p.texttype?c=c.substring(0,a)+b:"word"==p.texttype&&(c=c.split(" ",a).toString().replace(/,/g," ")+b)}if(p.Txtcont){let a=p.ContCount?p.ContCount:100,b=p.ContDots?p.ContDots:"";"char"==p.ContType?d=d.substring(0,a)+b:"word"==p.ContType&&(d=d.split(" ",a).toString().replace(/,/g," ")+b)}}return b+=`<div class="tp-ser-item ${j.styleColumn} animated-columns"><a class="tp-serpost-link" ${g} ${f}>`,p.ONThumb&&a.thumb&&(b+=`<div class="tp-serpost-thumb"><img class="tp-item-image" src="${a.thumb}""></div>`),b+=`<div class="tp-serpost-wrap">`,(p.ONTitle&&c||p.ONPrice&&a.Wo_Price)&&(b+=`<div class="tp-serpost-inner-wrap">`,p.ONTitle&&c&&(b+=`<div class="tp-serpost-title">${c}</div>`),p.ONPrice&&a.Wo_Price&&(b+=`<div class="tp-serpost-price">${a.Wo_Price}</div>`),b+=`</div>`),p.ONContent&&d&&(b+=`<div class="tp-serpost-excerpt">${d}</div>`),p.ONShortDesc&&a.Wo_shortDesc&&(b+=`<div class="tp-serpost-shortDesc">${a.Wo_shortDesc}</div>`),b+=`</div></a></div>`,b},D=function(a,b){let c=h[0].querySelectorAll(".post-load-more"),d=h[0].querySelector(".tp-search-slider"),e=h[0].querySelectorAll(".tp-search-pagina");0<e.length&&a.loadmore_page&&e[0].insertAdjacentHTML("beforeend",a.loadmore_page),0<c.length&&c[0].addEventListener("click",function(){let a=+this.dataset.page,f=+(a+1),g=h[0].querySelectorAll(".tp-ser-item");b.offset=g.length,b.loadNumpost=q.loadnumber,jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:b,beforeSend:function(){c[0].textContent=q.loadingtxt},success:function(a){let b=a.data.posts,g=a.data.total_count,i=null,j="";for(i in b)j+=C(b[i]);if(d.insertAdjacentHTML("beforeend",j),"no-animation"!=s&&K("flex"),c[0].dataset&&c[0].dataset.page&&(c[0].dataset.page=f),0<e.length){let a=e[0].querySelectorAll(".tp-load-number");0<a.length&&(a[0].textContent=f,J(a[0],400))}let k=h[0].querySelectorAll(".tp-ser-item");k.length>=g&&(c[0].classList.add("tp-hide"),c[0].parentNode.insertAdjacentHTML("beforeend",`<div class="plus-all-posts-loaded">${q.loadedtxt}</div>`))},complete:function(){c[0].textContent=q.loadbtntxt}})})},E=function(a,b,c,f){let g=h[0].querySelectorAll(".post-lazy-load"),i=h[0].querySelector(".tp-search-slider");var j,k,l,m,n,o,p=d(window),r=function(){j=p.width(),k=p.height(),l=d("body").height(),n=d(".tp-search-area").height(),o=d(".tp-search-area").offset().top+50,setTimeout(function(){n=d(".tp-search-area").height(),o=d(".tp-search-area").offset().top+50},50)};r(),p.resize(r),p.bind("scroll",function(a){a.preventDefault(),r(),m=p.scrollTop(),n=d(".tp-search-area").height(),o=d(".tp-search-area").offset().top+50;var b=d(".tp-search-area").find(".post-lazy-load"),c=h[0].querySelectorAll(".tp-ser-item");if(f.offset=c.length,f.loadNumpost=q.loadnumber,d(".tp-search-area").find(".post-lazy-load").length&&m<l&&m+60>n+o-k){if(b.data("requestRunning"))return;b.data("requestRunning",!0),jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:f,beforeSend:function(){},success:function(a){let b=a.data.posts,c=a.data.total_count,d=null,e="";for(d in b)e+=C(b[d]);i.insertAdjacentHTML("beforeend",e),"no-animation"!=s&&K("flex");let f=h[0].querySelectorAll(".tp-ser-item");f.length==c&&(g[0].classList.add("tp-hide"),g[0].parentNode.insertAdjacentHTML("beforeend",`<div class="plus-all-posts-loaded">${q.loadedtxt}</div>`),p.unbind("scroll"))},complete:function(){b.data("requestRunning",!1)}})}})},F=function(a,b,c,e){let f=h[0].querySelector(".tp-search-list-inner"),g=h[0].querySelectorAll(".tp-pagelink.tp-ajax-page"),i=h[0].querySelectorAll(".tp-pagelink.next"),j=h[0].querySelectorAll(".tp-pagelink.prev"),k=q&&q.Pcounter?q.Pcounter:0,l=q&&q.PClimit?q.PClimit:3;"no-animation"!=s&&L(),0<g.length&&g.forEach(function(a,b){if(+a.dataset.page==1){let a=h[0].querySelectorAll(".tp-search-slider");0<a.length&&a[0].classList.add("ajax-"+1)}else d(f).append("<div class=\"tp-search-slider tp-row ajax-"+ +(b+1)+"\"></div>");a.addEventListener("click",function(){f.classList.contains("animate-general")&&(f.style.opacity=1);let a=this.dataset&&this.dataset.page?+this.dataset.page:0,h=100*b;e.offset=a*y-y,H(g,a),x&&(j[0].setAttribute("data-prev",a),i[0].setAttribute("data-next",a));let k=f.querySelectorAll(".tp-search-slider.ajax-"+a);return 0<k.length&&k[0].querySelector(".tp-ser-item")?(f.style.cssText="transform: translateX("+-h+"%)",G(c),void("no-animation"!=s&&L(k))):void jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:e,beforeSend:function(){},success:function(a){let b=a.data.posts,e=null,g="";for(e in b)g+=C(b[e]);d(k[0]).append(g),f.style.cssText="transform: translateX("+-h+"%)",G(c),"no-animation"!=s&&K("flex")},complete:function(){"no-animation"!=s&&L()}})})}),0<i.length&&i[0].addEventListener("click",function(){let a=this.dataset&&this.dataset.next?+this.dataset.next:0,b=a+1,h=-(a*100);e.offset=b*y-y,k&&g.forEach(function(a,c){if(b==+a.dataset.page&&a.classList.contains("tp-hide")){a.classList.remove("tp-hide"),g.forEach(function(a,b){+(c+1-l)==b+1&&a.classList.add("tp-hide")})}}),H(g,b),x&&(j[0].setAttribute("data-prev",b),i[0].setAttribute("data-next",b));let m=f.querySelectorAll(".tp-search-slider.ajax-"+b);return 0<m.length&&m[0].querySelector(".tp-ser-item")?(f.style.cssText="transform: translateX("+h+"%)",G(c),void("no-animation"!=s&&L(m))):void jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:e,beforeSend:function(){},success:function(a){let b=a.data.posts,e=null,g="";for(e in b)g+=C(b[e]);d(m[0]).append(g),f.style.cssText="transform: translateX("+h+"%)",G(c),"no-animation"!=s&&K("flex")},complete:function(){"no-animation"!=s&&L()}})}),0<j.length&&j[0].addEventListener("click",function(){f.classList.contains("animate-general")&&(f.style.opacity=1);let a=this.dataset&&this.dataset.prev?+this.dataset.prev:0,b=a-1,h=-(100*b)+100;e.offset=b*y-y,k&&g.forEach(function(a,c){if(b==+a.dataset.page&&a.classList.contains("tp-hide")){a.classList.remove("tp-hide"),g.forEach(function(a,b){+(c+1)+ +l==b+1&&a.classList.add("tp-hide")})}}),H(g,b),x&&(j[0].setAttribute("data-prev",b),i[0].setAttribute("data-next",b));let m=f.querySelectorAll(".tp-search-slider.ajax-"+b);return 0<m.length&&m[0].querySelector(".tp-ser-item")?(f.style.cssText="transform: translateX("+h+"%)",G(c),void("no-animation"!=s&&L(m))):void jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:e,beforeSend:function(){},success:function(a){let b=a.data.posts,e=null,g="";for(e in b)g+=C(b[e]);d(m[0]).append(g),f.style.cssText="transform: translateX("+h+"%)",G(c),"no-animation"!=s&&K("flex")},complete:function(){"no-animation"!=s&&L()}})})},G=function(a){if(a.columns){let b=h[0].querySelectorAll(".tp-pagelink.next"),c=h[0].querySelectorAll(".tp-pagelink.prev");if(0<b.length){let c=b[0].dataset&&b[0].dataset.next?b[0].dataset.next:"";parseInt(c)==a.columns?d(".tp-pagelink.next").hide():d(".tp-pagelink.next").show()}if(0<c.length){let a=c[0].dataset&&c[0].dataset.prev?c[0].dataset.prev:"";1==parseInt(a)?d(".tp-pagelink.prev").hide():d(".tp-pagelink.prev").show()}}},H=function(a,b){0<a.length&&a.forEach(function(a){b==+a.dataset.page?a.classList.add("active"):a.classList.contains("active")&&a.classList.remove("active")})},I=function(){let b=h[0].querySelector(".tp-search-area"),c=h[0].querySelector("input[name=s]"),e=a[0].querySelectorAll(".tp-rental-overlay"),f=h[0].querySelector(".tp-close-btn");d(".tp-close-btn",a).on("click",function(){c.value="",d(this).hide(),d(b).slideUp(),0<e.length&&(e[0].style.cssText="visibility:hidden;opacity:0;")}),i.keyup(function(a){"Escape"===a.key&&(c.value="",d(b).slideUp(),f.style.cssText="display:none")})},J=function(a,b=600){a.style.display="",a.style.opacity=0;var c=+new Date,d=function(){a.style.opacity=+a.style.opacity+(new Date-c)/b,c=+new Date,1>+a.style.opacity&&(window.requestAnimationFrame&&requestAnimationFrame(d)||setTimeout(d,16))};d()},K=function(a="auto"){let b=h[0].querySelectorAll(".tp-search-list-inner.animate-general");if(0<b.length&&b[0].dataset&&(b[0].dataset.animateColumns="stagger")){let c=b[0].dataset.animateDelay?b[0].dataset.animateDelay:50,e=b[0].dataset.animateStagger?b[0].dataset.animateStagger:150,f=b[0].dataset.animateType,d=b[0].dataset.animateDuration?b[0].dataset.animateDuration:50,g=b[0].querySelectorAll(".animated-columns:not(.animation-done)");0<g.length&&g.forEach(function(b,g){b.style.opacity="0",b.style.display="none",setTimeout(function(){b.classList.contains("animation-done")||(b.classList.add("animation-done"),jQuery(b).velocity(f,{delay:c,display:a,duration:d,stagger:e}))},500*g)})}},L=function(a=""){let b=h[0].querySelectorAll(".tp-search-list-inner");0<b.length&&b[0].classList.contains("animate-general")&&(b[0].style.opacity=1),a&&(a.forEach(function(a){let b=a.querySelectorAll(".tp-ser-item.animation-done");0<b.length&&b.forEach(function(a){a.classList.remove("animation-done")})}),K("flex"))};document.addEventListener("click",function(a){if(null==a.target.closest(".tp-search-bar")){null!=c&&0!=c.size&&"undefined"!=c.size&&"undefined"!=typeof c.abort&&c.abort(),"none"!==h[0].querySelector(".tp-close-btn").style.display&&""!=h[0].querySelector(".tp-close-btn").style.display&&h[0].querySelector(".tp-close-btn").click();[".tp-ajx-loading",".tp-close-btn"].forEach(function(a){0<h[0].querySelectorAll(a).length&&(h[0].querySelector(a).style.cssText="display:none")})}}),document.addEventListener("mouseover",function(a){let b=a.target?a.target:"",c=h[0].querySelectorAll(".tp-search-input");if((b.closest(".tp-close-btn")||b.closest(".tp-close-btn")==b)&&0<c.length&&c.forEach(function(a){a.blur(),h[0].querySelector(".tp-close-btn").style.cssText="display:flex",h[0].querySelector(".tp-ajx-loading").style.cssText="display:none"}),!b.closest(".tp-input-field")){if(!b.classList.contains(".tp-rsearch-tagname")||!b.classList.contains(".tp-rsearch-tag"))return!1;0<c.length&&(w=!0,c[0].blur())}},!1)};window.addEventListener("elementor/frontend/init",()=>{elementorFrontend.hooks.addAction("frontend/element_ready/tp-search-bar.default",d)})})(jQuery);